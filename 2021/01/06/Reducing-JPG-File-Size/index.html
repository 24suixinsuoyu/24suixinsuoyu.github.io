<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/images/manifest.json">
  <meta name="msapplication-config" content="/images/browserconfig.xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"24suixinsuoyu.com","root":"/","scheme":"Mist","version":"7.7.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Colt McAnlis · May 3, 2016 · 10 min read">
<meta property="og:type" content="article">
<meta property="og:title" content="Reducing JPG File Size">
<meta property="og:url" content="http://24suixinsuoyu.com/2021/01/06/Reducing-JPG-File-Size/index.html">
<meta property="og:site_name" content="隋钟元’s Blog">
<meta property="og:description" content="Colt McAnlis · May 3, 2016 · 10 min read">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://miro.medium.com/max/4800/1*sRYE2_-ROxbzz1y1s4M9GQ.png">
<meta property="og:image" content="https://miro.medium.com/max/1248/1*vZF5gbyfYtDskdRr1MTZXA.png">
<meta property="og:image" content="https://miro.medium.com/max/1246/1*QCVqIL_ueQju40gyJGXodg.png">
<meta property="og:image" content="https://miro.medium.com/max/1248/1*5yfAv-aFdneBAZywSUZ1Ag.png">
<meta property="og:image" content="https://miro.medium.com/max/1246/1*kxVa2DEkM048to6UnUYCfA.png">
<meta property="og:image" content="https://miro.medium.com/max/1400/1*VwKrI76p9IsLWhJmPQaD6Q.jpeg">
<meta property="og:image" content="https://miro.medium.com/max/1400/1*BGquAMZw-oEEj5IH-xJEhw.jpeg">
<meta property="og:image" content="https://miro.medium.com/max/1248/1*sv9wBkOKWzaFIUOEiAHLLQ.png">
<meta property="og:image" content="https://miro.medium.com/max/1400/0*qFRye2GXhYIH4Vkv.">
<meta property="article:published_time" content="2021-01-06T15:09:30.000Z">
<meta property="article:modified_time" content="2021-02-08T16:45:42.841Z">
<meta property="article:author" content="隋钟元">
<meta property="article:tag" content="Technology">
<meta property="article:tag" content="JPG">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://miro.medium.com/max/4800/1*sRYE2_-ROxbzz1y1s4M9GQ.png">

<link rel="canonical" href="http://24suixinsuoyu.com/2021/01/06/Reducing-JPG-File-Size/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>Reducing JPG File Size | 隋钟元’s Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">隋钟元’s Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-university"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th-list"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-english">

    <a href="/english/" rel="section"><i class="fa fa-fw fa-graduation-cap"></i>英语</a>

  </li>
        <li class="menu-item menu-item-life">

    <a href="/life/" rel="section"><i class="fa fa-fw fa-balance-scale"></i>生活</a>

  </li>
        <li class="menu-item menu-item-resume">

    <a href="/resume/" rel="section"><i class="fa fa-fw fa-user-circle-o"></i>简历</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/commonweal/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>公益 404</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/24suixinsuoyu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://24suixinsuoyu.com/2021/01/06/Reducing-JPG-File-Size/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="隋钟元">
      <meta itemprop="description" content="技术创造价值">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="隋钟元’s Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Reducing JPG File Size
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-06 23:09:30" itemprop="dateCreated datePublished" datetime="2021-01-06T23:09:30+08:00">2021-01-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-09 00:45:42" itemprop="dateModified" datetime="2021-02-09T00:45:42+08:00">2021-02-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E3%80%8ATechnology-Articles%E3%80%8B/" itemprop="url" rel="index"><span itemprop="name">《Technology Articles》</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>9.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>9 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>Colt McAnlis · May 3, 2016 · 10 min read</p>
</blockquote>
<a id="more"></a>

<p><img src="https://miro.medium.com/max/4800/1*sRYE2_-ROxbzz1y1s4M9GQ.png" alt="Reducing JPG"></p>
<p>If you’re a modern developer, then you use JPG files. Doesn’t matter if you’re a web dev, mobile dev, or some weird sysadmin who just sends around memes all day. JPGs are a part of your job, and critical to the experience of the uses who benefit from that work.</p>
<p>Which is why it’s so important to make sure these JPG files are as small as possible. With the <a href="http://www.wired.com/2016/04/average-webpage-now-size-original-doom/" target="_blank" rel="noopener">Average webpage size now larger than the original DOOM game</a>, you have to start asking where all the bytes are coming from, and how you can do more to toss those things out(Don’t get me started on the sizes of mobiles apps…).</p>
<p>While <a href="https://medium.freecodecamp.com/how-jpg-works-a4dbd2316f35#.z4lekhosw" target="_blank" rel="noopener">JPG</a> in its’ own right, how you use it in your application can influence the size of these files significantly. As such I’ve assembled a handy collection of things that can help you squeeze out those last bits, and make a better experience for your users.</p>
<h3 id="You-should-be-using-an-optimizer-tool"><a href="#You-should-be-using-an-optimizer-tool" class="headerlink" title="You should be using an optimizer tool"></a>You should be using an optimizer tool</h3><p>Once you start looking at <a href="https://medium.freecodecamp.com/how-jpg-works-a4dbd2316f35" target="_blank" rel="noopener">JPG compression methods</a>, and the <a href="https://en.wikipedia.org/wiki/JPEG" target="_blank" rel="noopener">file format</a>, you’ll start to realize that, much like <a href="https://medium.com/@duhroach/reducing-png-file-size-8473480d0476" target="_blank" rel="noopener">PNG files</a>, there’s plenty of room for improvement. For example, check out the file size difference when you save a JPG from photoshop, vs “exporting for web”:</p>
<p><img src="https://miro.medium.com/max/1248/1*vZF5gbyfYtDskdRr1MTZXA.png" alt="optimizer tool"></p>
<p>That’s around a 90% file size reduction, for a simple red square. See, much like PNG, JPG also supports some <a href="https://en.wikipedia.org/wiki/JPEG#Syntax_and_structure" target="_blank" rel="noopener">chunk data in the file format</a>, which means photo editors or cameras can <a href="http://dev.exiv2.org/projects/exiv2/wiki/The_Metadata_in_JPEG_files" target="_blank" rel="noopener">insert non picture information into the file</a>. This is why your photo sharing service knows the geolocation of the last <a href="https://www.instagram.com/bestfoodaustin/" target="_blank" rel="noopener">waffle you ate</a>, and what camera <a href="https://exposingtheinvisible.org/resources/obtaining-evidence/image-digging" target="_blank" rel="noopener">you took it with</a>. If your application doesn’t need this extra data, then removing if from the JPG files can yield a significant improvement.</p>
<p>But it turns out there’s <a href="http://www.elektronik.htw-aalen.de/packjpg/_notes/PCS2007_PJPG_paper_final.pdf" target="_blank" rel="noopener">quite a bit</a> more you can do with the format.</p>
<p>For starters, tools like <a href="http://www.jpegmini.com/" target="_blank" rel="noopener">JPEGMini</a> are geared towards finding lower quality(lossy) compression w/o disrupting the visual fidelity of your images too much. Which is similar to what the Mozilla folks have done with <a href="https://github.com/mozilla/mozjpeg/" target="_blank" rel="noopener">MOZJpeg</a>(Although they explicitly state that their project does break some compatibility).</p>
<p>On the other hand, <a href="http://jpegclub.org/" target="_blank" rel="noopener">jpegTran/cjpeg</a> attempt to provide lossless improvements to size, while <a href="http://www.elektronik.htw-aalen.de/packjpg/" target="_blank" rel="noopener">packJPG</a> will repack JPG data into a much smaller form, although it’s a separate file format, and not JPG compatible any more(which is handy if you can do your own decode in the client).</p>
<p>In addition to those, there’s a whole slew of web-based tools, but I haven’t found those to be any better than the ones listed(or rather, most of them just use the above tools behind the scenes…). And of course, <a href="http://www.imagemagick.org/script/index.php" target="_blank" rel="noopener">ImageMagick</a> has it’s own <a href="http://www.imagemagick.org/script/mogrify.php" target="_blank" rel="noopener">bag of tricks</a>.</p>
<p>The end result is adopting these tools can often net you 15% and 24% reduction on file sizes, which is a nice improment for a small investment.</p>
<p><strong>[UPDATE 3/26/2017]</strong> Google just released a new JPG compressor, <a href="https://github.com/google/guetzli" target="_blank" rel="noopener">Guetzli</a>, which can reduce files by an extra ~35% while still keeping the format compatible with standards. <a href="https://arxiv.org/abs/1703.04421" target="_blank" rel="noopener">Guetzli works much like it’s cousin</a>, <a href="https://github.com/google/zopfli" target="_blank" rel="noopener">Zopfli</a>, in that this size reduction comes at the cost of extra processing time during encoding.</p>
<h3 id="Find-the-optimal-quality-value"><a href="#Find-the-optimal-quality-value" class="headerlink" title="Find the optimal quality value."></a>Find the optimal quality value.</h3><p>Let’s be clear about this: you should never ship JPGs @ 100 quality.</p>
<p>The power of JPG comes from the fact that you can tune the quality vs file-size ratio with a scalar value. The trick, is finding out what the correct quality value is for your images. Given a random images, how do you determine the ideal setting?</p>
<p>As the <a href="https://github.com/rflynn/imgmin" target="_blank" rel="noopener">imgmin</a> project points out, there’s generally only a small change in user-perceived quality for JPG compression between levels 75 and 100:</p>
<blockquote>
<p>For an average JPEG there is a very minor, mostly insignificant change in  apparent quality form 100-75, but a significant filesize difference for each step down. This means that many images look good to the casual viewer at quality 75, but are half as large than they would be at quality 95 As quality drops below 75 there are larger apparent visual changes and reduced saving in filesize.</p>
</blockquote>
<p>So, starting at a quality setting of 75 is an obvious initial state; but we’re missing a bigger problem here: We can’t expect people to fine-tune this value by hand.</p>
<p>For large media application that upload and re-send millions of JPGs a day, you can’t expect that someone will hand-tune their values for each asset. As such, most  developers create buckets of quality settings, and compress their images according to that bucket.</p>
<p>For example, thumbnails may have a quality setting of 35, since the smaller image hides more of the compression artifacts. And maybe full-screen profile photos get a different setting that previews of Music album covers, etc etc.</p>
<p>And you can see this effect live and in the field: The <a href="https://github.com/rflynn/imgmin" target="_blank" rel="noopener">imgmin</a> project further goes to show that most large websites tend to oscillate their images around this quality=75 marks for almost all of their JPG images:</p>
<p>Google Images thumbnails:74-76</p>
<p>Facebook full-size images:85</p>
<p>Yahoo frontpage JPGs:69-91</p>
<p>YouTube frontpage JPGs:70-82</p>
<p>Wikipedia images:80</p>
<p>Windows live background:82</p>
<p>Twitter user JPEG images:30-100</p>
<p><strong>The issue here is that the values chosen aren’t ideal.</strong></p>
<p>They are usually the result of a single quality value chosen in a vacuum and then applied to all images coming through the system. In reality, some images could be compressed further with negligent quality loss, while other images will be compressed too much and not look good; The quality value should changes, per-images, in order to find the ideal sweet spot.</p>
<p><strong>What if</strong> there was a way to measure the visual degradation that compression has on an image?</p>
<p><strong>What if</strong> you could test that value against the quality metric to find out if it’s a good level?</p>
<p><strong>What if</strong> you could automate the above two, to run on your server?</p>
<p>There <strong>is</strong>.</p>
<p>Can <strong>do</strong>.</p>
<p>Totally <strong>possible</strong>.</p>
<p>This all starts with something known as the <a href="http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=6530010&url=http%3A%2F%2Fieeexplore.ieee.org%2Fiel7%2F6523355%2F6529997%2F06530010.pdf%3Farnumber%3D6530010" target="_blank" rel="noopener">Psychovisual Error Threshold</a>, which basically denotes how much degradation can be inserted into an image before the human eye starts to notice it.</p>
<p>There’s a few measurements of this, notably the <a href="https://en.wikipedia.org/wiki/Peak_signal-to-noise_ratio" target="_blank" rel="noopener">PSNR</a> and <a href="https://en.wikipedia.org/wiki/Structural_similarity" target="_blank" rel="noopener">SSIM</a> metrics. Each has their own nuances with respect to evaluation measurement, which is why I rather prefer the new <a href="http://goo.gl/1ehQOi" target="_blank" rel="noopener">Butteraugli</a> project. After testing it on a corpus of images, I found that the metric is a lot more understandable to me in terms of visual quality.</p>
<p>To do this, you write a simple script to:</p>
<ul>
<li>Save a JPG file at various quality values</li>
<li>Use <a href="">Butteraugli</a> to test for the <a href="">Psychovisual Error Threshold</a></li>
<li>Stop once the output value is &gt; 1.1</li>
<li>And save the final image using that quality value</li>
</ul>
<p>The result is the smallest JPG file possible that doesn’t impact the PET more than significantly noticeable. For the image below, the difference is 170k in saving, but visually it looks the same.</p>
<p><img src="https://miro.medium.com/max/1246/1*QCVqIL_ueQju40gyJGXodg.png" alt="PET"></p>
<p>Of course, you could go even further than this. Maybe your goal is to allow a lot more visual loss in order to conserve bandwidth. You could easily continue on with this, but there’s madness there. As of right now, the <a href="">Butteraugli</a> denotes that any result &gt; 1.1 is deemed “bad looking” and doesn’t try to define what any of that looks like, from a numerical authority. So you could run the script to stop once visual quality hits 2.0(see the image below) but at that point, it’s unclear what the visual scalar is that you’re testing against.</p>
<p><img src="https://miro.medium.com/max/1248/1*5yfAv-aFdneBAZywSUZ1Ag.png" alt="PET"></p>
<h3 id="Blurring-Chroma"><a href="#Blurring-Chroma" class="headerlink" title="Blurring Chroma"></a>Blurring Chroma</h3><p>One of the reasons that JPG is so powerful, is that expects there to be little visual variance in an 8*8 block. Directly, the human eye is more attuned to visual changes in the Luminosity channel of the <a href="">YCbCr</a> image. As such, if you can reduce the amount of variation in chroma across your 8*8 blocks, you’ll end up producing less visual artifacts, and better compression. The simplest way to do this is to apply a median filter to high-contrast areas of your chroma channel. Let’s take a look at this process with the sample image below.</p>
<p><img src="https://miro.medium.com/max/1246/1*kxVa2DEkM048to6UnUYCfA.png" alt="Blurring Chroma"></p>
<p>One trick here is that most photo editing programs don’t support editing in <a href="">YCbCr</a> colorspace; but they do support <a href="">LAB</a>. The L channel represents Lightness(which is close to the Y channel, luminosity) while the A and B channels represent Red/Green and Blue/Yellow, similar components to Cb and Cr. By converting your image to LAB, you should see the following channels:</p>
<p><img src="https://miro.medium.com/max/1400/1*VwKrI76p9IsLWhJmPQaD6Q.jpeg" alt="channels"></p>
<p>What we’d like to do is smooth out the sharp transitions in the A/B channels. Doing so will give the compressor more homogeneous values to work with. To do this, we select the areas of high detail in each of those channels, and apply a 1-3 pixel blur to that area. The result will smooth out the information significantly, without hurting the visual impact on the image much.</p>
<p><img src="https://miro.medium.com/max/1400/1*BGquAMZw-oEEj5IH-xJEhw.jpeg" alt="channels"></p>
<p>The main point here is that by slightly blurring the A/B modes of our image, we can reduce the amount of visual variance in those channels, such that when JPG goes through its’ down sampling phase, your image gets less unique information in the CbCr channels. You can see the result of that below.</p>
<p><img src="https://miro.medium.com/max/1248/1*sv9wBkOKWzaFIUOEiAHLLQ.png" alt="channels"></p>
<p>The top image is our source file, and the bottom, we blurred some of the Cb/CR data in the image, producing a file that’s smaller by ~50%.</p>
<h3 id="Use-Guetzli"><a href="#Use-Guetzli" class="headerlink" title="Use Guetzli"></a>Use Guetzli</h3><p>[update] Since writing this article originally, Google’s compression team has released <a href="">Guetzli</a>, which IMHO is one of the most impressive JPG codec’s I’ve seen in a while. It’s currently state-of-the-art, generating 20-30% smaller JPG images than libJPEG, which puts it on par w/WebP(see below) without having to support a unique format. I haven’t had a chance to dig into how the encoder works, just yet, but I’m eager to find some time to figure it out;)</p>
<h3 id="Consider-WebP"><a href="#Consider-WebP" class="headerlink" title="Consider WebP"></a>Consider WebP</h3><p>At this point, <a href="https://developers.google.com/speed/webp/" target="_blank" rel="noopener">WebP</a> shouldn’t be news to you. I’ve been suggesting <a href="https://www.youtube.com/watch?v=1pkKMiDWwpM" target="_blank" rel="noopener">folks use it</a> for some time now, because it’s a really impressive codec. One of the <a href="https://developers.google.com/speed/webp/docs/webp_study#introduction" target="_blank" rel="noopener">original studies compared WebP to JPG</a>, showing that the files can be 25%-33% smaller with the same SSIM index, which is a great amount of savings for just swapping file formats.</p>
<p>Regardless if you’re a web developer, or mobile developer, the support and saving from WebP denotes a firm evaluation for your pipeline.</p>
<h3 id="“Science-the-shit-out-of-it”"><a href="#“Science-the-shit-out-of-it”" class="headerlink" title="“Science the shit out of it”"></a>“Science the shit out of it”</h3><p><a href="https://www.youtube.com/watch?v=d6lYeTWdYLw" target="_blank" rel="noopener">Thanks Mark</a>, I sent you some potatoes; LMK when they arrive.</p>
<p>One of the biggest problems with modern image compression is that most engineering is done in the vacuum of “the file.” That is, pixel data comes in, compressed image format goes out.</p>
<p>Done.Move on.</p>
<p>But that’s really only half the story. Modern application consume images at various places and methods, for various needs. There is no single “one size fits all” solution, and certainly there’s opportunities to leverage the internet as a medium to transfer information.</p>
<p>That’s why it’s so impressive that the engineers over @ <a href="https://code.facebook.com/posts/991252547593574/the-technology-behind-preview-photos/" target="_blank" rel="noopener">Facebook</a> figured out a hell of a way to leverage every type of trick they could to compress their images. The result <a href="https://code.facebook.com/posts/991252547593574/the-technology-behind-preview-photos/" target="_blank" rel="noopener">has to be my favorite posts on the internet</a>, reducing their preview photos to only 200 bytes each.</p>
<p><img src="https://miro.medium.com/max/1400/0*qFRye2GXhYIH4Vkv." alt="leverage"></p>
<p>The magic behind this solution came from a lot of analysis of the JPG header data(which they were able to remove &amp; hard-code in the codec) alongside an aggressive Blurring &amp; scaling process that occurs @ load time. <strong>200 bytes is insane</strong>. I haven’t seen anything that crazy since the <a href="http://stackoverflow.com/questions/891643/twitter-image-encoding-challenge" target="_blank" rel="noopener">Twitter Image Encoding challenge</a>, which figured out you can evolve the <a href="https://rogeralsing.com/2008/12/07/genetic-programming-evolution-of-mona-lisa/" target="_blank" rel="noopener">Mona Lisa using genetic programming</a>. Proof that thinking just in the space of an image codec may be limiting the ability to do truly amazing things with your data compression.</p>
<h3 id="The-takeaway"><a href="#The-takeaway" class="headerlink" title="The takeaway"></a>The takeaway</h3><p>At the end of the day, your company needs to find a middle ground between automatic bucketing of quality values, against hand-optimizing them, and even figuring out how to compress data further. The result is going to be a reduction in cost for your send the content, store the content, and clients to receive the content.</p>

    </div>

    
    
    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;margin-top:80px">-------------------- 本文结束<i class="fa fa-paw"></i>感谢您的阅读 --------------------</div>
    
</div>
      
    </div>
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>隋钟元
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://24suixinsuoyu.com/2021/01/06/Reducing-JPG-File-Size/" title="Reducing JPG File Size">http://24suixinsuoyu.com/2021/01/06/Reducing-JPG-File-Size/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Technology/" rel="tag"><i class="fa fa-tag"></i> Technology</a>
              <a href="/tags/JPG/" rel="tag"><i class="fa fa-tag"></i> JPG</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/01/06/How-WebP-Works-lossly-mode/" rel="prev" title="How WebP Works(lossly mode)">
      <i class="fa fa-chevron-left"></i> How WebP Works(lossly mode)
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/06/Reducing-PNG-File-Size/" rel="next" title="Reducing PNG File Size">
      Reducing PNG File Size <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#You-should-be-using-an-optimizer-tool"><span class="nav-text">You should be using an optimizer tool</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Find-the-optimal-quality-value"><span class="nav-text">Find the optimal quality value.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Blurring-Chroma"><span class="nav-text">Blurring Chroma</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Guetzli"><span class="nav-text">Use Guetzli</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Consider-WebP"><span class="nav-text">Consider WebP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#“Science-the-shit-out-of-it”"><span class="nav-text">“Science the shit out of it”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-takeaway"><span class="nav-text">The takeaway</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="隋钟元"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">隋钟元</p>
  <div class="site-description" itemprop="description">技术创造价值</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">345</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">480</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:24suixinsuoyu@gmail.com" title="E-Mail → mailto:24suixinsuoyu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/24suixinsuoyu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;24suixinsuoyu" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/24sxsy" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;24sxsy" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/guolin_blog" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;guolin_blog" rel="noopener" target="_blank">郭霖</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/lmj623565791/" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;lmj623565791&#x2F;" rel="noopener" target="_blank">鸿洋</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.520monkey.com/" title="http:&#x2F;&#x2F;www.520monkey.com&#x2F;" rel="noopener" target="_blank">姜维</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://daimajia.com/" title="https:&#x2F;&#x2F;daimajia.com&#x2F;" rel="noopener" target="_blank">代码家</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://kmxz.net/" title="https:&#x2F;&#x2F;kmxz.net&#x2F;" rel="noopener" target="_blank">孔祥舟</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://yangwenbo.com/" title="http:&#x2F;&#x2F;yangwenbo.com&#x2F;" rel="noopener" target="_blank">杨文博</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">隋钟元</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">1.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">24:18</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  















  

  

</body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/clicklove.js"></script>

